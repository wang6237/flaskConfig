(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6c6c"],{"1f34":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("el-button",{staticClass:"el-button",staticStyle:{margin:"10px","margin-left":"90%"},attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加用户")])],1),e._v(" "),s("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Username",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Password",align:"center","show-password":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{attrs:{"show-password":""}},[e._v(e._s(t.row.password))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Role",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.roles))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Email",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.email))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Actions",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(a)}}},[e._v("\n          Edit\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("\n          Delete\n        ")])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.addUserFormVisible},on:{"update:visible":function(t){e.addUserFormVisible=t}}},[s("el-form",{ref:"addUserDataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"70px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{disabled:e.isUsernameDisabled},model:{value:e.temp.username,callback:function(t){e.$set(e.temp,"username",t)},expression:"temp.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.temp.password,callback:function(t){e.$set(e.temp,"password",t)},expression:"temp.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Email"}},[s("el-input",{model:{value:e.temp.email,callback:function(t){e.$set(e.temp,"email",t)},expression:"temp.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Role"}},[s("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.temp.roles,callback:function(t){e.$set(e.temp,"roles",t)},expression:"temp.roles"}},e._l(e.roleTypeOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addUserFormVisible=!1}}},[e._v("\n      Cancel\n    ")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createDate():e.updateDate()}}},[e._v("\n      Confirm\n    ")])],1)],1)],1)},l=[],r=s("c24f"),i=[{key:"guest",display_name:"Guest"},{key:"admin",display_name:"Admin"},{key:"dev",display_name:"Dev"},{key:"test",display_name:"Test"}],n={name:"userList",data:function(){return{list:[],total:"",tableKey:0,listLoading:!0,addUserFormVisible:!1,isUsernameDisabled:!1,roleTypeOptions:i,temp:{username:"",password:"",roles:"",email:""},textMap:{update:"Edit",create:"添加用户"},dialogStatus:"",rules:{username:[{required:!0,message:"username is required",trigger:"blur"}],password:[{required:!0,message:"password is required",trigger:"change"}],email:[{required:!0,message:"email is required",trigger:"change"}],roles:[{required:!0,message:"role is required",trigger:"change"}]}}},created:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;Object(r["d"])().then((function(t){console.log(t.data),e.list=t.data.items,e.total=t.data.total}))},addUser:function(){this.dialogStatus="create",this.addUserFormVisible=!0},createDate:function(){var e=this;this.$refs["addUserDataForm"].validate((function(t){t&&Object(r["a"])(e.temp).then((function(t){var s=t.data.msg;e.addUserFormVisible=!1,e.$notify({title:"Success",message:s,type:"success",duration:2e3}),e.getUserInfo()}))}))},updateDate:function(){var e=this;this.$refs["addUserDataForm"].validate((function(t){if(t){var s=Object.assign({},e.temp);Object(r["g"])(s).then((function(){e.addUserDataForm=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}),e.getUserInfo(),e.addUserFormVisible=!1}))}}))},handleUpdate:function(e){this.temp=Object.assign({},e),this.dialogStatus="update",this.addUserFormVisible=!0,this.isUsernameDisabled=!0},handleDelete:function(e){var t=this;this.temp=Object.assign({},e);var s=this.temp.username;Object(r["b"])(s).then((function(e){console.log(e),t.getUserInfo(),t.$notify({title:"Success",message:"Delete User Successfully",type:"success",duration:2e3})}))}}},o=n,d=s("2877"),u=Object(d["a"])(o,a,l,!1,null,"3db3a2e2",null);t["default"]=u.exports}}]);